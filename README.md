# api_yamdb

Проект YaMDb - учебный проект курса Яндекс-Практикум. Какой-то особой пользы от него нет.
По замыслу авторов технического задания, он предназначен для работы с базой данных, в которую входят перечни:
- художественных произведений;
- категорий произведений (такие, как "книги", "фильмы", "музыка" и т.п.);
- жанров произведений (такие, как "Драма", "Фантастика", "Рок", "Шансон" и т.п.);
- отзывов на произведения;
- комментариев к отзывам на произведения;
- вспомогательный перечень соответсвий между произведениями и жанрами (нужен потому, что одно произведение может относиться к нескольким жанрам, а один жанр - к нескольким произведениям);
- вспомогательный перечень, хранящий зарегистрированных пользователей проекта.

Пользователи регистрируется в проекте, им назначается одна из ролей, определяющая их права доступа. После этого они могут совершать в проекте действия, дозволенные их роли, в том числе, но не обязательно:
- создавать/читать/изменять/удалять объект произведения, полного списка произведений;
- создавать/читать/изменять/удалять объект категории, полного списка категорий;
- создавать/читать/изменять/удалять объект жанра, полного списка жанров;
- создавать/читать/изменять/удалять объект отзыва, полного списка отзывов;
- создавать/читать/изменять/удалять объект комментария на отзыв, полного списка комментариев.

В объект отзыва входит поле рейтинга (в диапазоне от 1 до 10). Каждый объект произведения, таким образом, имеет усредненный, по всем на него отзывам, рейтинг.
Один пользователь на одно произведение может оставить тольок один отзыв.
Авторизация в проекте - с помощью разработанного самостоятельно разработчиками механизма (приблизительного аналога популярной библиотеки djoser). Как и последняя, она использует для аутентификамии механизм JWT-токенов.
Значительная часть проекта посвящена разработке API: отдача и получение запросов данных в формате JSON.
В запросах возможны фильтрация и поиск.
Хранение информации в проекте - база данных формата SQLite.


# Разработчики

Семён ********

https://github.com/*****

E-mail *****@*****

Общее руководство разработкой, группой из трёх разработчиков, что несомненно будет плюсом перед его будущими работодателями.
- модель пользователя;
- вьюсеты пользователя;
- эндпойнты пользователя;
- разработка системы регистрации и аутентификации пользователей, работа с токеном, права доступа, система подтверждения через email.

Андрей ******

https://github.com/*****

E-mail *****@*****

- модели отзывов и комментариев;
- вьюсеты отзывов и комментариев;
- эндпоинты отзывов и комментариев;
- система отзывов на произведения, рейтинг произведения;
- система комментариев к отзывам.

Дмитрий *******

https://github.com/*****

E-mail *****@*****

- модели произведений, категорий и жанров;
- вьюсеты произведений, категорий и жанров;
- эндпоинты произведений, категорий и жанров;
- конвертер контента из CSV-формата в SQLite- формат;
- документация проекта.


# Стек технологий

- Python-3.9;
- Django-3.2;
- Djangorestframework-3.12;
- Djangorestframework--simplejwt-4.7.2;
- SQLite;
- Git.

# Запуск проекта

(Далее - команды для винды. У кого линь или мак - те пусть сами себе изменят команды.)

Клонировать репозиторий и перейти на него

```
git clone https://github.com/******/api_yamdb.git
```

```
cd api_yamdb
```

Создать и активировать виртуальное окружение

```
python -m venv venv
```

```
source venv/Scripts/activate
```

Устанавить зависимости

```
pip install -r requirements.txt
```

Сделать миграции

```
python api_yamdb/manage.py migrate
```

При необходимости создать суперпользователя

```
python api_yamdb/manage.py createsuperuser
```

При необходимости загрузить тестовые данные
  
```
python api_yamdb/manage.py import_db
```

Запустить проект

```
python api_yamdb/manage.py runserver
```

Проект будет доступен запущенным на локальном сервере разработчика по адресу:
http://127.0.0.1:8000/
Админ-зона проекта будет доступна на локальном сервере разработчика по адресу:
http://127.0.0.1:8000/admin/
Документация проекта, получеченная вместе с его техническим заданием (а не разработанная разработчкиками) в формате redoc.yaml будет доступна на локальном сервере разработчика по адресу
http://127.0.0.1:8000/redoc/
Вместе с техническим заданием, разработчиками были получены тесты проекта, написанные на pytest.

# Ресурсы проекта

(Термин "ресурсы" взят из технического задания. Видимо, авторы задания подразумевали под ним набор из: модель, эндпоинты, вьюсеты (при необходимости вью-функции) и сериализаторы.)
- ресурс auth: аутентификация и ресурс users: пользователи;
- ресурс titles: произведения, к которым пишут отзывы (определённый фильм, книга или песенка);
- ресурс categories: категории (типы) произведений («Фильмы», «Книги», «Музыка»);
- ресурс genres: жанры произведений;
- ресурс reviews: отзывы на произведения;
- ресурс comments: комментарии к отзывам.

# Роли пользователей

- аноним — читает описания произведений, отзывы и комментарии;
- аутентифицированный пользователь (user) — читает всё, как и аноним, может публиковать отзывы и ставить оценки произведениям (фильмам/книгам/песенкам), может комментировать отзывы; может редактировать и удалять свои отзывы и комментарии, редактировать свои оценки произведений. Эта роль присваивается по умолчанию каждому новому пользователю;
- модератор (moderator) — те же права, что и у аутентифицированного пользователя, плюс право удалять и редактировать любые отзывы и комментарии;
- администратор (admin) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям;
- суперюзер Django, всегда обладает правами администратора, пользователя с правами admin. Даже если изменить пользовательскую роль суперюзера — это не лишит его прав администратора. Суперюзер — всегда администратор, но администратор — не обязательно суперюзер.

# Пример запроса и ответа API

```
url = 'http://127.0.0.1:8000/api/v1/titles/  
data =
{"name": "name",
"year": 2000,
"description": "description",
"genre": ["genre",],
"category": "category"
}  
headers = {'Authorization': 'Bearer any_token'}  
```
```
Код 200
{
"id": 0,
"name": "name",
"year": 2000,
"rating": 0,
"description": "description",
"genre": [
{}
],
"category": {
"name": "name",
"slug": "slug"
}
}
```